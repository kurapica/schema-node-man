import{d as Xe,r as y,W as Ze,X as Ge,c as V,e as p,w as r,h as i,i as o,l as Ke,j as a,Y as ae,f as $,Q as B,Z as Ve,B as el,t as d,C as l,F as Z,$ as ll,x as tl,a0 as nl,n as A,a1 as ol,a2 as Ee,a5 as al,a6 as re,A as rl,ak as il,y as sl,z as dl,m as F,al as ul,ab as N,p as fl,_ as H,am as h,a9 as L,a3 as W,aa as m,an as vl,ao as wl,af as G,ap as Se,aq as $e,ar as T,as as pl,at as ml}from"./index-BVmIZ4g2.js";/* empty css                    */import{_ as yl}from"./tryapp.vue_vue_type_script_setup_true_lang-zmW4Ru_N.js";/* empty css                */const kl={key:0,style:{color:"red"}},bl={key:1},gl={key:1},cl={class:"draw-view"},Cl={key:0,style:{color:"red"}},xl={key:1},Vl={class:"draw-view"},El={class:"draw-view"},Wl=Xe({__name:"appSchema",setup(Sl){const Ae=!!N(),ie=y([]),g=Ze({app:"",keyword:""});if(localStorage.schema_man_appsearch)try{const s=JSON.parse(localStorage.schema_man_appsearch);s&&typeof s=="object"&&(g.app=s.app||"",g.keyword=s.keyword||"")}catch(s){}const Fe=()=>{fl(g.keyword)?g.app="":g.keyword=""},he=()=>{const s=g.app.split(".");g.app=s.slice(0,s.length-1).join(".")},We=s=>{g.app=s.name},Y=async()=>{localStorage.schema_man_appsearch=JSON.stringify(g);const s=await h(g.app||"");ie.value=s!=null&&s.apps?[...s.apps]:[]};Ge(g,Y,{immediate:!0});const se=y(),U=y(!1),k=y(void 0),K=y("");let _=null;const Ne=async()=>{localStorage.schema_new_app=g.app,k.value=new H({type:"system.schema.appschema"},{}),U.value=!0,_=k.value.subscribe(()=>{var s,e;K.value=l.value["frontend.view.new"]+" "+(l.value((s=k.value)==null?void 0:s.data.display)||((e=k.value)==null?void 0:e.data.name)||"")},!0)},de=async(s,e)=>{var v,f;const t=await h(s.name);k.value=new H({type:"system.schema.appschema",readonly:e},L(t)),U.value=!0,e?K.value=l.value["frontend.view.view"]+" "+(l.value((v=k.value)==null?void 0:v.data.display)||((f=k.value)==null?void 0:f.data.name)||""):_=k.value.subscribe(()=>{var u,x;K.value=l.value["frontend.view.edit"]+" "+(l.value((u=k.value)==null?void 0:u.data.display)||((x=k.value)==null?void 0:x.data.name)||"")},!0)},Ue=s=>{if((s.loadState||0)&W.Server){const e=N();if(e&&!e.deleteAppSchema(s.name)){m.error(l.value["frontend.view.cantdelapp"]);return}}return vl(s.name),wl(s.name),Y()},Re=async()=>{var v,f,u;if(!await((v=se.value)==null?void 0:v.validate())||!((f=k.value)!=null&&f.valid)||!((u=k.value)!=null&&u.valid))return;const e=L(G(k.value.data)),t=Se(e.name);if(!t||(t.loadState||0)&W.Server){const x=N();if(x)try{if(!await x.saveAppSchema(e)){m.error(l.value["frontend.view.error"]);return}e.loadState=(e.loadState||0)|W.Server}catch(c){if(c&&c.status===403){m.error(l.value["frontend.view.nopermission"]);return}m.error(l.value["frontend.view.error"]),console.error(c);return}}return $e([e],e.loadState),T(e),ue(),U.value=!1,Y()},ue=()=>{var s;_&&_(),(s=k.value)==null||s.dispose(),k.value=void 0,_=null},ee=y(!1),z=y([]),q=y("");let S=null;const je=async s=>{S=s.name;const e=await h(s.name);q.value=l.value(e==null?void 0:e.display)||(e==null?void 0:e.name)||"",z.value=e!=null&&e.fields?[...e.fields]:[],ee.value=!0},De=s=>{const{row:e}=s;return e.disable?"disable-row":e.sourceApp?"ref-row":e.func?"push-row":e.frontend?"frontend-row":""},fe=y(),R=y(!1),b=y(void 0),le=y("");let M=null;const Oe=async()=>{b.value=new H({type:"system.schema.appfieldschema"},{app:S}),R.value=!0,M=b.value.subscribe(()=>{var s,e;le.value=l.value["frontend.view.new"]+" "+(l.value((s=b.value)==null?void 0:s.data.display)||((e=b.value)==null?void 0:e.data.name)||"")},!0)},ve=async(s,e)=>{var t,v;b.value=new H({type:"system.schema.appfieldschema",readonly:e},L(G(s))),R.value=!0,e?le.value=l.value["frontend.view.view"]+" "+(l.value((t=b.value)==null?void 0:t.data.display)||((v=b.value)==null?void 0:v.data.name)||""):M=b.value.subscribe(()=>{var f,u;le.value=l.value["frontend.view.edit"]+" "+(l.value((f=b.value)==null?void 0:f.data.display)||((u=b.value)==null?void 0:u.data.name)||"")},!0)},Be=async s=>{const e=await h(S);if(!(e!=null&&e.fields))return;if((e.loadState||0)&W.Server){const v=N();if(v)try{if(!v.deleteAppFieldSchema(e.name,s.name)){m.error(l.value["frontend.view.error"]);return}}catch(f){if(f&&f.status===403){m.error(l.value["frontend.view.nopermission"]);return}m.error(l.value["frontend.view.error"]),console.error(f);return}}const t=e.fields.findIndex(v=>v.name===s.name);t>=0&&(e.fields.splice(t,1),T(e),z.value=e!=null&&e.fields?[...e.fields]:[])},Te=async s=>{const e=await h(S);if(!(e!=null&&e.fields))return;const t=e.fields.findIndex(f=>f.name===s.name);if(t<=0)return;const v=e.fields[t-1];if((e.loadState||0)&W.Server){const f=N();if(f)try{if(!f.swapAppFieldSchema(e.name,s.name,v.name)){m.error(l.value["frontend.view.error"]);return}}catch(u){if(u&&u.status===403){m.error(l.value["frontend.view.nopermission"]);return}m.error(l.value["frontend.view.error"]),console.error(u);return}}e.fields[t-1]=e.fields[t],e.fields[t]=v,T(e),z.value=e!=null&&e.fields?[...e.fields]:[]},ze=async()=>{var f,u,x;if(!await((f=fe.value)==null?void 0:f.validate())||!((u=b.value)!=null&&u.valid)||!((x=b.value)!=null&&x.valid))return;const e=L(G(b.value.data)),t=await h(S);if(!t)return;if((t.loadState||0)&W.Server){const c=N();if(c)try{if(!await c.saveAppFieldSchema(t.name,e)){m.error(l.value["frontend.view.error"]);return}}catch(C){if(C&&C.status===403){m.error(l.value["frontend.view.nopermission"]);return}m.error(l.value["frontend.view.error"]),console.error(C);return}}t.fields||(t.fields=[]);const v=t.fields.findIndex(c=>c.name===e.name);v>=0?t.fields[v]=e:t.fields.push(e),T(t),z.value=t!=null&&t.fields?[...t.fields]:[],we(),R.value=!1},we=()=>{var s;M&&M(),(s=b.value)==null||s.dispose(),b.value=void 0,M=null,Y()},te=y(!1),P=y([]),Ie=async s=>{S=s.name;const e=await h(s.name);q.value=l.value(e==null?void 0:e.display)||(e==null?void 0:e.name)||"",P.value=e!=null&&e.workflows?[...e.workflows]:[],te.value=!0},pe=y(),j=y(!1),E=y(void 0),me=y("");let ne=null;const Je=async()=>{E.value=new H({type:"system.schema.appworkflowschema"},{app:S}),j.value=!0,ne=E.value.subscribe(()=>{var s,e;me.value=l.value["frontend.view.new"]+" "+(l.value((s=E.value)==null?void 0:s.data.display)||((e=E.value)==null?void 0:e.data.name)||"")},!0)},ye=async(s,e)=>{E.value=new H({type:"system.schema.appworkflowschema",readonly:e},L(G(s))),j.value=!0},He=async s=>{const e=await h(S);if(e!=null&&e.workflows){if((e.loadState||0)&W.Server){const t=N();if(t)try{if(!t.deleteAppWorkflowSchema(e.name,s.name)){m.error(l.value["frontend.view.error"]);return}}catch(v){if(v&&v.status===403){m.error(l.value["frontend.view.nopermission"]);return}m.error(l.value["frontend.view.error"]),console.error(v);return}}e.workflows=e.workflows.filter(t=>t.name!==s.name),T(e),P.value=e!=null&&e.workflows?[...e.workflows]:[]}},Le=async()=>{var f,u,x;if(!await((f=pe.value)==null?void 0:f.validate())||!((u=E.value)!=null&&u.valid)||!((x=E.value)!=null&&x.valid))return;const e=L(G(E.value.data)),t=await h(S);if(!t)return;if((t.loadState||0)&W.Server){const c=N();if(c)try{if(e.name&&e.name!==t.name&&!await c.saveAppWorkflowSchema(t.name,e)){m.error(l.value["frontend.view.error"]);return}}catch(C){if(C&&C.status===403){m.error(l.value["frontend.view.nopermission"]);return}m.error(l.value["frontend.view.error"]),console.error(C);return}}t.workflows||(t.workflows=[]);const v=t.workflows.findIndex(c=>c.name===e.name);v>=0?t.workflows[v]=e:t.workflows.push(e),T(t),P.value=t!=null&&t.workflows?[...t.workflows]:[],ke(),j.value=!1},ke=()=>{var s;ne&&ne(),(s=E.value)==null||s.dispose(),E.value=void 0,ne=null},Ye=async(s,e)=>{const t=await h(S);if(!(t!=null&&t.workflows))return;if((t.loadState||0)&W.Server){const f=N();if(f)try{if(s.name&&s.name!==t.name&&!f.toggleAppWorkflowSchema(t.name,s.name,e)){m.error(l.value["frontend.view.error"]);return}}catch(u){if(u&&u.status===403){m.error(l.value["frontend.view.nopermission"]);return}m.error(l.value["frontend.view.error"]),console.error(u);return}}const v=t.workflows.findIndex(f=>f.name===s.name);v>=0&&(t.workflows[v].active=e),T(t),P.value=t!=null&&t.workflows?[...t.workflows]:[]},oe=y(!1),_e=()=>{oe.value=!0},Q=y(!1);let I=[];const qe=()=>{I=[],Q.value=!0},Me=s=>{I=s.map(e=>e.name)},Pe=()=>{if(!I.length)return;const s=I.length>1?"appschema.json":"".concat(I[0],".json"),e=JSON.stringify(I.map(Se).map(u=>pl(u)),null,2),t=new Blob([e],{type:"application/octet-stream"}),v=URL.createObjectURL(t),f=document.createElement("a");f.href=v,f.download=s,document.body.appendChild(f),f.click(),document.body.removeChild(f),Q.value=!1},Qe=s=>(s.text().then(e=>{const t=JSON.parse(e);if(Array.isArray(t))return $e(t,W.Custom),ml(),Y()}),!1);return(s,e)=>{const t=el,v=ll,f=Ke,u=ol,x=al,c=nl,C=tl,D=rl,O=dl,J=sl;return p(),V(O,{class:"main"},{default:r(()=>[i(f,{style:{height:"fit-content",width:"100%"}},{default:r(()=>[i(a(ae),{model:g,style:{display:"flex"},"hide-required-asterisk":"",inline:""},{default:r(()=>[i(a(B),{modelValue:g.app,"onUpdate:modelValue":e[0]||(e[0]=n=>g.app=n),"in-form":"",config:{type:"system.schema.app",display:a(Ve)("system.schema.app")}},null,8,["modelValue","config"]),e[20]||(e[20]=o()),i(a(B),{modelValue:g.keyword,"onUpdate:modelValue":e[1]||(e[1]=n=>g.keyword=n),"in-form":"",config:{type:"system.string",display:a(Ve)("frontend.view.keyword")}},null,8,["modelValue","config"]),e[21]||(e[21]=o()),i(t,{type:"info",onClick:Fe},{default:r(()=>[o(d(a(l)["frontend.view.reset"]),1)]),_:1}),e[22]||(e[22]=o()),i(t,{type:"primary",onClick:Ne},{default:r(()=>[o(d(a(l)["frontend.view.new"]),1)]),_:1}),e[23]||(e[23]=o()),Q.value?(p(),$(Z,{key:1},[i(t,{type:"success",onClick:Pe},{default:r(()=>[o(d(a(l)["frontend.view.confirm"]),1)]),_:1}),e[19]||(e[19]=o()),i(t,{type:"info",onClick:e[2]||(e[2]=n=>Q.value=!1)},{default:r(()=>[o(d(a(l)["frontend.view.cancel"]),1)]),_:1})],64)):(p(),$(Z,{key:0},[i(t,{type:"success",onClick:qe},{default:r(()=>[o(d(a(l)["frontend.view.download"]),1)]),_:1}),e[18]||(e[18]=o()),i(v,{style:{"padding-left":"1rem"},"before-upload":Qe,limit:1,"show-file-list":!1},{default:r(()=>[i(t,{type:"success"},{default:r(()=>[o(d(a(l)["frontend.view.upload"]),1)]),_:1})]),_:1})],64))]),_:1},8,["model"])]),_:1}),e[72]||(e[72]=o()),i(C,null,{default:r(()=>[i(c,{data:ie.value,style:{width:"100%",height:"70vh"},border:!0,"header-align":"left","header-cell-style":{background:"#eee"},onSelectionChange:Me},{default:r(()=>[Q.value?(p(),V(u,{key:0,type:"selection",width:"55"})):A("",!0),e[30]||(e[30]=o()),i(u,{align:"left",prop:"name",label:a(l)["frontend.view.name"],"min-width":"120"},{default:r(n=>[n.row.status&&n.row.status!=a(Ee).Ready?(p(),$("span",kl,d(n.row.name),1)):(p(),$("span",bl,d(n.row.name),1))]),_:1},8,["label"]),e[31]||(e[31]=o()),i(u,{align:"left",prop:"display",label:a(l)["frontend.view.display"],"min-width":"150"},{default:r(n=>{var w;return[o(d(a(l)((w=n.row.display)!=null&&w.key?n.row.display:n.row.name)),1)]}),_:1},8,["label"]),e[32]||(e[32]=o()),i(u,{align:"left",prop:"desc",label:a(l)["frontend.view.desc"],"min-width":"150"},{default:r(n=>[o(d(a(l)(n.row.desc)),1)]),_:1},8,["label"]),e[33]||(e[33]=o()),i(u,{align:"left","header-align":"center",label:a(l)["frontend.view.oper"],width:"440"},{header:r(()=>[g.app?(p(),$("a",{key:0,href:"javascript:void(0)",onClick:he,style:{"text-decoration":"underline",color:"lightseagreen"}},d(a(l)["frontend.view.return"]),1)):(p(),$("span",gl,d(a(l)["frontend.view.oper"]),1))]),default:r(n=>{var w,be,ge,ce,Ce,xe;return[i(t,{type:"info",onClick:X=>de(n.row,!0)},{default:r(()=>[o(d(a(l)["frontend.view.view"]),1)]),_:1},8,["onClick"]),e[24]||(e[24]=o()),i(t,{type:"success",onClick:X=>de(n.row,!1)},{default:r(()=>[o(d(a(l)["frontend.view.edit"]),1)]),_:1},8,["onClick"]),e[25]||(e[25]=o()),!n.row.hasFields&&!((w=n.row.fields)!=null&&w.length)?(p(),V(t,{key:0,type:"info",onClick:X=>We(n.row)},{default:r(()=>[o(d(a(l)["frontend.view.down"]),1)]),_:1},8,["onClick"])):A("",!0),e[26]||(e[26]=o()),!n.row.hasApps&&!((be=n.row.apps)!=null&&be.length)?(p(),V(t,{key:1,type:"primary",onClick:X=>je(n.row)},{default:r(()=>[o(d(a(l)["frontend.view.fields"]),1)]),_:1},8,["onClick"])):A("",!0),e[27]||(e[27]=o()),(n.row.hasFields||(ge=n.row.fields)!=null&&ge.length)&&a(Ae)?(p(),V(t,{key:2,type:"warning",onClick:X=>Ie(n.row)},{default:r(()=>[o(d(a(l)["frontend.view.workflow"]),1)]),_:1},8,["onClick"])):A("",!0),e[28]||(e[28]=o()),!n.row.hasApps&&!((ce=n.row.apps)!=null&&ce.length)&&!n.row.hasFields&&!((Ce=n.row.fields)!=null&&Ce.length)&&!((xe=n.row.workflows)!=null&&xe.length)?(p(),V(x,{key:3,title:a(l)["frontend.view.confirmdelete"],"confirm-button-text":a(l).YES,"cancel-button-text":a(l).NO,icon:a(re),onConfirm:X=>Ue(n.row)},{reference:r(()=>[i(t,{type:"danger"},{default:r(()=>[o(d(a(l)["frontend.view.delete"]),1)]),_:1})]),_:1},8,["title","confirm-button-text","cancel-button-text","icon","onConfirm"])):A("",!0)]}),_:1},8,["label"])]),_:1},8,["data"])]),_:1}),e[73]||(e[73]=o()),i(D,null,{default:r(()=>[i(t,{type:"danger",onClick:a(il),style:{position:"absolute",right:"3rem"}},{default:r(()=>[o(d(a(l)["frontend.view.clearcustomapps"]),1)]),_:1},8,["onClick"])]),_:1}),e[74]||(e[74]=o()),i(J,{modelValue:U.value,"onUpdate:modelValue":e[5]||(e[5]=n=>U.value=n),title:K.value,direction:"rtl",size:"100%","append-to-body":"",onClosed:ue},{default:r(()=>[i(O,{class:"main",style:{height:"80vh"}},{default:r(()=>[i(C,null,{default:r(()=>[k.value?(p(),V(a(ae),{key:0,ref_key:"editorRef",ref:se,model:k.value.rawData,"label-width":"160","label-position":"left",style:{width:"100%",height:"90%"}},{default:r(()=>[F("div",cl,[i(a(B),{node:k.value,"in-form":"expandall","plain-text":"left"},null,8,["node"])])]),_:1},8,["model"])):A("",!0)]),_:1}),e[37]||(e[37]=o()),i(D,null,{default:r(()=>{var n;return[e[35]||(e[35]=F("br",null,null,-1)),e[36]||(e[36]=o()),(n=k.value)!=null&&n.readonly?(p(),V(t,{key:0,onClick:e[3]||(e[3]=w=>U.value=!1)},{default:r(()=>[o(d(a(l)["frontend.view.close"]),1)]),_:1})):(p(),$(Z,{key:1},[i(t,{type:"primary",onClick:Re},{default:r(()=>[o(d(a(l)["frontend.view.save"]),1)]),_:1}),e[34]||(e[34]=o()),i(t,{onClick:e[4]||(e[4]=w=>U.value=!1)},{default:r(()=>[o(d(a(l)["frontend.view.cancel"]),1)]),_:1})],64))]}),_:1})]),_:1})]),_:1},8,["modelValue","title"]),e[75]||(e[75]=o()),i(J,{modelValue:ee.value,"onUpdate:modelValue":e[7]||(e[7]=n=>ee.value=n),title:q.value,direction:"rtl",size:"100%","append-to-body":""},{default:r(()=>[i(O,{class:"main",style:{height:"80vh"}},{default:r(()=>[i(C,null,{default:r(()=>[i(c,{data:z.value,"row-class-name":De,style:{width:"100%",height:"65vh"},border:!0,"header-align":"left","header-cell-style":{background:"#eee"}},{default:r(()=>[i(u,{align:"left",prop:"name",label:a(l)["frontend.view.name"],"min-width":"120"},{default:r(n=>[n.row.status&&n.row.status!=a(Ee).Ready?(p(),$("span",Cl,d(n.row.name),1)):(p(),$("span",xl,d(n.row.name),1))]),_:1},8,["label"]),e[42]||(e[42]=o()),i(u,{align:"left",prop:"display",label:a(l)["frontend.view.display"],"min-width":"150"},{default:r(n=>{var w;return[o(d(a(l)((w=n.row.display)!=null&&w.key?n.row.display:n.row.name)),1)]}),_:1},8,["label"]),e[43]||(e[43]=o()),i(u,{align:"left",prop:"type",label:a(l)["frontend.view.type"],"min-width":"120"},{default:r(n=>[i(a(B),{modelValue:n.row.type,"onUpdate:modelValue":w=>n.row.type=w,config:{type:"system.schema.valuetype",readonly:!0},"plain-text":"left"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),e[44]||(e[44]=o()),i(u,{align:"left",prop:"desc",label:a(l)["frontend.view.desc"],"min-width":"150"},{default:r(n=>[o(d(a(l)(n.row.desc)),1)]),_:1},8,["label"]),e[45]||(e[45]=o()),i(u,{align:"left","header-align":"center",label:a(l)["frontend.view.oper"],width:"400"},{header:r(()=>[F("a",{href:"javascript:void(0)",onClick:Oe,style:{"text-decoration":"underline",color:"lightseagreen"}},d(a(l)["frontend.view.new"]),1)]),default:r(n=>[i(t,{type:"info",onClick:w=>ve(n.row,!0)},{default:r(()=>[o(d(a(l)["frontend.view.view"]),1)]),_:1},8,["onClick"]),e[38]||(e[38]=o()),i(t,{type:"success",onClick:w=>ve(n.row,!1)},{default:r(()=>[o(d(a(l)["frontend.view.edit"]),1)]),_:1},8,["onClick"]),e[39]||(e[39]=o()),n.$index>0?(p(),V(t,{key:0,type:"warning",onClick:w=>Te(n.row)},{default:r(()=>[o(d(a(l)["frontend.view.moveup"]),1)]),_:1},8,["onClick"])):A("",!0),e[40]||(e[40]=o()),i(x,{title:a(l)["frontend.view.confirmdelete"],"confirm-button-text":a(l).YES,"cancel-button-text":a(l).NO,icon:a(re),onConfirm:w=>Be(n.row)},{reference:r(()=>[i(t,{type:"danger"},{default:r(()=>[o(d(a(l)["frontend.view.delete"]),1)]),_:1})]),_:1},8,["title","confirm-button-text","cancel-button-text","icon","onConfirm"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1}),e[49]||(e[49]=o()),i(D,null,{default:r(()=>[e[46]||(e[46]=F("br",null,null,-1)),e[47]||(e[47]=o()),z.value.length?(p(),V(t,{key:0,type:"primary",onClick:_e},{default:r(()=>[o(d(a(l)["frontend.view.tryit"]),1)]),_:1})):A("",!0),e[48]||(e[48]=o()),i(t,{onClick:e[6]||(e[6]=n=>ee.value=!1)},{default:r(()=>[o(d(a(l)["frontend.view.close"]),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"]),e[76]||(e[76]=o()),i(J,{modelValue:R.value,"onUpdate:modelValue":e[10]||(e[10]=n=>R.value=n),title:le.value,direction:"rtl",size:"100%","append-to-body":"",onClosed:we},{default:r(()=>[i(O,{class:"main",style:{height:"80vh"}},{default:r(()=>[i(C,null,{default:r(()=>[b.value?(p(),V(a(ae),{key:0,ref_key:"fieldEditorRef",ref:fe,model:b.value.rawData,"label-width":"160","label-position":"left",style:{width:"100%",height:"90%"}},{default:r(()=>[F("div",Vl,[i(a(B),{node:b.value,"in-form":"expandall","plain-text":"left"},null,8,["node"])])]),_:1},8,["model"])):A("",!0)]),_:1}),e[53]||(e[53]=o()),i(D,null,{default:r(()=>{var n;return[e[51]||(e[51]=F("br",null,null,-1)),e[52]||(e[52]=o()),(n=b.value)!=null&&n.readonly?(p(),V(t,{key:0,onClick:e[8]||(e[8]=w=>R.value=!1)},{default:r(()=>[o(d(a(l)["frontend.view.close"]),1)]),_:1})):(p(),$(Z,{key:1},[i(t,{type:"primary",onClick:ze},{default:r(()=>[o(d(a(l)["frontend.view.save"]),1)]),_:1}),e[50]||(e[50]=o()),i(t,{onClick:e[9]||(e[9]=w=>R.value=!1)},{default:r(()=>[o(d(a(l)["frontend.view.cancel"]),1)]),_:1})],64))]}),_:1})]),_:1})]),_:1},8,["modelValue","title"]),e[77]||(e[77]=o()),i(J,{modelValue:te.value,"onUpdate:modelValue":e[12]||(e[12]=n=>te.value=n),title:q.value,direction:"rtl",size:"100%","append-to-body":""},{default:r(()=>[i(O,{class:"main",style:{height:"80vh"}},{default:r(()=>[i(C,null,{default:r(()=>[i(c,{data:P.value,style:{width:"100%",height:"65vh"},border:!0,"header-align":"left","header-cell-style":{background:"#eee"}},{default:r(()=>[i(u,{align:"left",prop:"name",label:a(l)["system.schema.appworkflowschema.name"],"min-width":"120"},null,8,["label"]),e[58]||(e[58]=o()),i(u,{align:"left",prop:"display",label:a(l)["system.schema.appworkflowschema.display"],"min-width":"150"},{default:r(n=>{var w;return[o(d(a(l)((w=n.row.display)!=null&&w.key?n.row.display:n.row.name)),1)]}),_:1},8,["label"]),e[59]||(e[59]=o()),i(u,{align:"left",prop:"desc",label:a(l)["system.schema.appworkflowschema.desc"],"min-width":"150"},{default:r(n=>[o(d(a(l)(n.row.desc)),1)]),_:1},8,["label"]),e[60]||(e[60]=o()),i(u,{align:"left",prop:"active",label:a(l)["system.schema.appworkflowschema.active"],"min-width":"120"},{default:r(n=>[i(a(B),{modelValue:n.row.active,"onUpdate:modelValue":w=>n.row.active=w,config:{type:a(ul),readonly:!0},"plain-text":"left"},null,8,["modelValue","onUpdate:modelValue","config"])]),_:1},8,["label"]),e[61]||(e[61]=o()),i(u,{align:"left","header-align":"center",label:a(l)["frontend.view.oper"],width:"400"},{header:r(()=>[F("a",{href:"javascript:void(0)",onClick:Je,style:{"text-decoration":"underline",color:"lightseagreen"}},d(a(l)["frontend.view.new"]),1)]),default:r(n=>[i(t,{type:"info",onClick:w=>ye(n.row,!0)},{default:r(()=>[o(d(a(l)["frontend.view.view"]),1)]),_:1},8,["onClick"]),e[54]||(e[54]=o()),i(t,{type:"warning",onClick:w=>Ye(n.row,!n.row.active)},{default:r(()=>[o(d(n.row.active?a(l).DEACTIVE:a(l).ACTIVE),1)]),_:2},1032,["onClick"]),e[55]||(e[55]=o()),i(t,{type:"success",onClick:w=>ye(n.row,!1)},{default:r(()=>[o(d(a(l)["frontend.view.edit"]),1)]),_:1},8,["onClick"]),e[56]||(e[56]=o()),i(x,{title:a(l)["frontend.view.confirmdelete"],"confirm-button-text":a(l).YES,"cancel-button-text":a(l).NO,icon:a(re),onConfirm:w=>He(n.row)},{reference:r(()=>[i(t,{type:"danger"},{default:r(()=>[o(d(a(l)["frontend.view.delete"]),1)]),_:1})]),_:1},8,["title","confirm-button-text","cancel-button-text","icon","onConfirm"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1}),e[64]||(e[64]=o()),i(D,null,{default:r(()=>[e[62]||(e[62]=F("br",null,null,-1)),e[63]||(e[63]=o()),i(t,{onClick:e[11]||(e[11]=n=>te.value=!1)},{default:r(()=>[o(d(a(l)["frontend.view.close"]),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"]),e[78]||(e[78]=o()),i(J,{modelValue:j.value,"onUpdate:modelValue":e[15]||(e[15]=n=>j.value=n),title:me.value,direction:"rtl",size:"100%","append-to-body":"",onClosed:ke},{default:r(()=>[i(O,{class:"main",style:{height:"80vh"}},{default:r(()=>[i(C,null,{default:r(()=>[E.value?(p(),V(a(ae),{key:0,ref_key:"workflowEditorRef",ref:pe,model:E.value.rawData,"label-width":"160","label-position":"left",style:{width:"100%",height:"90%"}},{default:r(()=>[F("div",El,[i(a(B),{node:E.value,"in-form":"expandall","plain-text":"left"},null,8,["node"])])]),_:1},8,["model"])):A("",!0)]),_:1}),e[68]||(e[68]=o()),i(D,null,{default:r(()=>{var n;return[e[66]||(e[66]=F("br",null,null,-1)),e[67]||(e[67]=o()),(n=E.value)!=null&&n.readonly?(p(),V(t,{key:0,onClick:e[13]||(e[13]=w=>j.value=!1)},{default:r(()=>[o(d(a(l)["frontend.view.close"]),1)]),_:1})):(p(),$(Z,{key:1},[i(t,{type:"primary",onClick:Le},{default:r(()=>[o(d(a(l)["frontend.view.save"]),1)]),_:1}),e[65]||(e[65]=o()),i(t,{onClick:e[14]||(e[14]=w=>j.value=!1)},{default:r(()=>[o(d(a(l)["frontend.view.cancel"]),1)]),_:1})],64))]}),_:1})]),_:1})]),_:1},8,["modelValue","title"]),e[79]||(e[79]=o()),i(J,{modelValue:oe.value,"onUpdate:modelValue":e[17]||(e[17]=n=>oe.value=n),title:a(l)["frontend.nav.tryit"]+q.value,direction:"rtl",size:"100%","append-to-body":"","destroy-on-close":""},{default:r(()=>[i(O,{class:"main",style:{height:"80vh"}},{default:r(()=>[i(C,null,{default:r(()=>[a(S)?(p(),V(yl,{key:0,app:a(S)},null,8,["app"])):A("",!0)]),_:1}),e[71]||(e[71]=o()),i(D,null,{default:r(()=>[e[69]||(e[69]=F("br",null,null,-1)),e[70]||(e[70]=o()),i(t,{onClick:e[16]||(e[16]=n=>oe.value=!1)},{default:r(()=>[o(d(a(l)["frontend.view.close"]),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"])]),_:1})}}});export{Wl as default};
