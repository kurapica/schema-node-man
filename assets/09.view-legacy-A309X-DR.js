!function(){function n(n){return function(n){if(Array.isArray(n))return e(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(n){if("string"==typeof n)return e(n,t);var a={}.toString.call(n).slice(8,-1);return"Object"===a&&n.constructor&&(a=n.constructor.name),"Map"===a||"Set"===a?Array.from(n):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(n,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,a=Array(e);t<e;t++)a[t]=n[t];return a}System.register(["./index-legacy-Cnd4X8U8.js"],function(e,t){"use strict";var a,r,o,l,u,s,i,c,d;return{setters:[function(n){a=n.d,r=n.f,o=n.e,l=n.h,u=n.i,s=n.m,i=n.w,c=n.au,d=n.F}],execute:function(){e("default",a({__name:"09.view",setup:function(e){return function(e,t){return o(),r(d,null,[l(c,null,{default:i(function(){return n(t[0]||(t[0]=[u("\n        ## 09.自定义视图\n\n        自定义视图定制可以参考`schema-node-vueview`中的默认实现，需要注意几点。\n\n        1. vue中通过定义props传入node节点，名字是固定，拿到后，需要通过toRaw转为实际节点，否则拿到的是vue封装过的，后续处理会有问题。\n    ",-1)]))}),_:1}),t[3]||(t[3]=u()),t[4]||(t[4]=s("pre",null,[u("        "),s("code",null," \n            const props = defineProps<{ node: ScalarNode }>()\n            const scalarNode = toRaw(props.node)\n        "),u("\n    ")],-1)),t[5]||(t[5]=u()),l(c,null,{default:i(function(){return n(t[1]||(t[1]=[u("\n        2. 请不要使用watch来订阅节点的数据修改和状态修改，可以通过节点的方法来订阅。\n    ",-1)]))}),_:1}),t[6]||(t[6]=u()),t[7]||(t[7]=s("pre",null,[u("        "),s("code",null,"\n            // 申明模板需要的状态\n            const state = reactive<{\n                data?: any,\n                display?: any,\n                disable?: boolean,\n                require?: boolean,\n                readonly?: boolean,\n            }>({})\n\n            // data & state watcher\n            let dataWatcher: Function | null = null\n            let stateWatcher: Function | null = null\n\n            onMounted(() => {\n                // 订阅数据变更\n                dataWatcher = scalarNode.subscribe(() => {\n                    const data = scalarNode.rawData // data可能会基于类型定义被转换，使用rawData可以显示错误的数据\n                    state.data = data\n                    state.display = `${!isNull(data) ? data : ''}`\n                }, true)\n\n                // 订阅节点的状态变化，类似不可见，黑白名单变更等状态变化\n                stateWatcher = scalarNode.subscribeState(() => {\n                    state.disable = scalarNode.rule.disable\n                    state.require = scalarNode.require\n                    state.readonly = scalarNode.readonly\n                }, true)\n            })\n\n            // 销毁时，同时销毁订阅记录\n            onUnmounted(() => {\n                if (dataWatcher) dataWatcher()\n                if (stateWatcher) stateWatcher()\n            })\n        "),u("\n    ")],-1)),t[8]||(t[8]=u()),l(c,null,{default:i(function(){return n(t[2]||(t[2]=[u("\n        3. 定义完成后，可以通过两种方式为类型注册。\n    ",-1)]))}),_:1}),t[9]||(t[9]=u()),t[10]||(t[10]=s("pre",null,'        // 覆盖默认视图\n        regSchemaTypeView("test.persons", waterFallView)\n\n        // 为类型注册皮肤名为waterfall的视图,之后可以在schemaView中通过skin指定\n        regSchemaTypeView("test.persons", waterFallView, "waterfall")\n    ',-1))],64)}}}))}}})}();
